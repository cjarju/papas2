$(document).ready(function(){
	
/* For ajax loaded html elements, use $(document).on(...) event handler */	

/* PAGINATION */
	
	function loadData(page){
        $("#loading_gif_div").css('display','block');
		$.ajax({
			type: "POST",
			url: "load_pag_data",
			data: "page="+page,
			success: function(str_html){
				$("#table_div").html(str_html);
                $("#loading_gif_div").css('display','none');
			}
		});
	}

    /*  For first time page load default results */
	loadData(1);

	/* for simple pagination */
	$(document).on("click",".paginglinks a",function(e){
		e.preventDefault();
		var page = $(this).attr('p');
		loadData(page);
	}); 
	
	/* for advanced pagination */
	$(document).on("click",".pagination li a",function(e){
		e.preventDefault();
		var page = $(this).attr('p');
		loadData(page);
	}); 

/* SEARCH */

    $(document).on("input click", "#keyword", function(e){

        var search_keyword = $(this).val();
        if (search_keyword.length >= 3) {
            /* send ajax request using POST method */
            $.ajax({
                type: "POST",
                url: "load_ls_results",
                data: "keywords="+search_keyword,
                dataType: 'html',
                success: function(str_html){
                    /* server return HTML string. */

                    var $ls_result_div = $('.ls_result_div');

                    $ls_result_div.hide();

                    $('.ls_result_ul').empty().html(str_html);

                    $ls_result_div.show();
                }
            });
        }
        else {
            $('.ls_result_div').hide();
            $('.ls_result_ul').empty();
        }
    });

	$(document).on("click", ".ls_result_ul li a", function(e){
		e.preventDefault();
		var id = $(this).attr('id');
		
		/* send ajax request using POST method */
		$.ajax({
			type: "POST",
			url: "load_ls_record",
			data: "id="+id,
			dataType: 'html', 
			success: function(str_html){
                /* server return HTML string. */

                $('.modal-body').html(str_html);
				$('#myModal').modal('show');
			} 
		}); 
	});
	

	$(document).on("click", "*", function(e){
			$('.ls_result_div').hide();
			$('.ls_result_ul').empty();
	});
	
	$(document).on("mouseover", ".ls_result_ul li a", function(e){
			$(this).css('backgroundColor', '#d9d9d9');
			 
	});
	
	$(document).on("mouseout", ".ls_result_ul li a", function(e){
			$(this).css('backgroundColor', '#ffffff');
			 
	});
});